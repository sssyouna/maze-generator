<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Maze Generator</title>
    <style>
        html, body {
            margin: 0;
            padding: 0;
            font-family: sans-serif;
        }

        body {
            display: flex;
            flex-direction: column;
            align-items: center; /* center horizontally */
        }

        #inputs {
            margin-top: 20px;
        }

        #maze-table {
            margin-top: 10px;
            border-collapse: collapse;
            border: 2px solid black;
        }
    </style>
</head>
<body>
    <div id="inputs">
        <h1>Give the maze dimensions</h1>
        <label>Width: <input type="number" id="w" required></label>
        <label>Height: <input type="number" id="h" required></label>
        <button id="generatebtn">Generate</button>
    </div>

    <table id="maze-table" style="border-collapse: collapse; border: 2px solid black;"></table>

    <script>
        document.addEventListener("DOMContentLoaded", function() {
            document.getElementById("generatebtn").addEventListener("click", function() {
                const width = document.getElementById("w").value;
                const height = document.getElementById("h").value;

                if (!width || !height) {
                    alert("Please enter both width and height");
                    return;
                }

                fetch("/generate", {
                    method: "POST",
                    headers: { "Content-Type": "application/json" },
                    body: JSON.stringify({
                        width: parseInt(width),
                        height: parseInt(height)
                    })
                })
                .then(res => res.json())
                .then(responseData => drawMaze(responseData.maze))
                .catch(err => console.error(err));
            });
        });
function drawMaze(data) {
    const { hor, ver, w, h } = data;
    const table = document.getElementById("maze-table");
    table.innerHTML = "";

    for (let y = 0; y < h; y++) {
        const tr = document.createElement("tr");

        for (let x = 0; x < w; x++) {
            const td = document.createElement("td");
            td.style.width = "25px";
            td.style.height = "25px";
            td.style.boxSizing = "border-box";

            // walls
            td.style.borderTop = hor[y][x] ? "2px solid black" : "none";
            td.style.borderBottom = hor[y + 1][x] ? "2px solid black" : "none";
            td.style.borderLeft = x === 0 || ver[y][x - 1] ? "2px solid black" : "none";
            td.style.borderRight = ver[y][x] ? "2px solid black" : "none";

            // entrance
            if (x === 0 && y === 0) td.style.background = "lightgreen";
            // exit
            if (x === w - 1 && y === h - 1) td.style.background = "lightcoral";

            tr.appendChild(td);
        }
        table.appendChild(tr);
    }
}

       
    </script>
</body>
</html>
